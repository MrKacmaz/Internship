<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
        integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
        integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <!-- Sweet alert src -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


    <title>OKEY 101</title>
</head>

<body>
    <div class="pageOne">

        <div class="user_1">

            <div class="input-group mb-3">
                <div class="input-group-text">
                    <input id="chbx1" class="form-check-input mt-0" type="checkbox"
                        aria-label="Checkbox for following text input">
                </div>
                <input id="userOneInput" type="text" class="form-control" aria-label="Text input with checkbox">
            </div>

        </div>

        <div class="user_2">

            <div class="input-group mb-3">
                <div class="input-group-text">
                    <input id="chbx2" class="form-check-input mt-0" type="checkbox"
                        aria-label="Checkbox for following text input">
                </div>
                <input id="userTwoInput" type="text" class="form-control" aria-label="Text input with checkbox">
            </div>

        </div>
        <div class="user_3">

            <div class="input-group mb-3">
                <div class="input-group-text">
                    <input id="chbx3" class="form-check-input mt-0" type="checkbox"
                        aria-label="Checkbox for following text input">
                </div>
                <input id="userThreeInput" type="text" class="form-control" aria-label="Text input with checkbox">
            </div>

        </div>
        <div class="user_4">

            <div class="input-group mb-3">
                <div class="input-group-text">
                    <input id="chbx4" class="form-check-input mt-0" type="checkbox"
                        aria-label="Checkbox for following text input">
                </div>
                <input id="userFourInput" type="text" class="form-control" aria-label="Text input with checkbox">
            </div>

        </div>

        <div class="numberOfLap">

            <div class="input-group mb-3">
                <label class="input-group-text" for="inputGroupSelect01">Number of Laps</label>
                <select class="form-select" id="inputGroupSelect01">
                    <option selected>Choose...</option>
                    <option value="7">7</option>
                    <option value="9">9</option>
                    <option value="11">11</option>
                    <option value="13">13</option>
                </select>
            </div>

        </div>

        <div class="save">
            <button class="btn btn-primary" type="submit" onclick="saveBtn()">Save</button>
        </div>

    </div>

    <div class="pageTwo" style="display: none;">
        <table class="table">
            <thead>
                <tr>
                    <th id="laps">Laps</th>
                    <th id="player1">Player1</th>
                    <th id="player2">Player2</th>
                    <th id="player3">Player3</th>
                    <th id="player4">Player4</th>
                    <th id="checked">Checked</th>
                </tr>
            </thead>
            <tbody id="tableTbody">

            </tbody>
        </table>


    </div>



    <script>
        var userOneName, userTwoName, userThreeName, userFourName, numberOfLaps, userChecked, moreChecked = 0;
        var tableTbodyRef = document.getElementById("tableTbody");

        function saveBtn() {
            userOneName = $('#userOneInput').val();
            userTwoName = $('#userTwoInput').val();
            userThreeName = $('#userThreeInput').val();
            userFourName = $('#userFourInput').val();
            numberOfLaps = $('#inputGroupSelect01').val();
            checkedUser();
            if (moreChecked != 1) {
                alert("more than one user");
            } else {
                console.log(userChecked);
                console.log(userOneName + " + " + userTwoName + " + " + userThreeName + " + " + userFourName + " + " + numberOfLaps);
                deletePageOne();
            }
        }

        function checkedUser() {
            let chbx1 = document.getElementById("chbx1");
            let chbx2 = document.getElementById("chbx2");
            let chbx3 = document.getElementById("chbx3");
            let chbx4 = document.getElementById("chbx4");
            if (chbx1.checked == true) {
                userChecked = userOneName;
                moreChecked++;
            }
            if (chbx2.checked == true) {
                userChecked = userTwoName;
                moreChecked++;
            }
            if (chbx3.checked == true) {
                userChecked = userThreeName;
                moreChecked++;
            }
            if (chbx4.checked == true) {
                userChecked = userFourName;
                moreChecked++;
            }
        }

        function deletePageOne() {
            $(".pageOne").remove();
            $(".pageTwo").show();
            addUserToTable();
        }

        function addUserToTable() {
            $("#player1").text(userOneName);
            $("#player2").text(userTwoName);
            $("#player3").text(userThreeName);
            $("#player4").text(userFourName)

            for (let i = 0; i < numberOfLaps; i++) {
                $("#tableTbody").append(
                    '<tr id = "trID-' + (i + 1) + '"><td id = "lapID-' + (i + 1) + '">' + (i + 1) + '</td>' +
                    '<td id = "userOneID-' + (i + 1) + '">' + ' <input id = "userOneTableInput-' + (i + 1) + '" type="number" class="form-control" aria-describedby="inputGroup-sizing-default"> </td>' +
                    '<td id = "userTwoID-' + (i + 1) + '">' + ' <input id = "userTwoTableInput-' + (i + 1) + '" type="number" class="form-control" aria-describedby="inputGroup-sizing-default"> </td>' +
                    '<td id = "userThreeID-' + (i + 1) + '">' + ' <input id = "userThreeTableInput-' + (i + 1) + '" type="number" class="form-control" aria-describedby="inputGroup-sizing-default"> </td> ' +
                    '<td id = "userFourID-' + (i + 1) + '">' + ' <input id = "userFourTableInput-' + (i + 1) + '" type="number" class="form-control" aria-describedby="inputGroup-sizing-default"> </td>' +
                    '<td id = "lapCheckID-' + (i + 1) + '">' + '<div class="form-check"><input  id="lapCheckInputID-' + (i + 1) + '" ' + ' class="form-check-input" type="checkbox" name="defaultCheck1"><label class="form-check-label" for="lapCheckInputID-' + (i + 1) + '" ' + ' ">Pass the lap</label></div> </td></tr>');


                $(("#lapCheckInputID-" + (i + 1))).change(function () {
                    var $input = $(this);
                    if ($input.prop("checked") == true) {
                        arrayAdder($("#userOneTableInput-"+(i+1)).val(), $("#userTwoTableInput-1").val(), $("#userThreeTableInput-1").val(), $("#userFourTableInput-1").val());
                        $("#userOneTableInput-" + (i + 1)).prop("disabled", true);
                        $("#userTwoTableInput-" + (i + 1)).prop("disabled", true);
                        $("#userThreeTableInput-" + (i + 1)).prop("disabled", true);
                        $("#userFourTableInput-" + (i + 1)).prop("disabled", true);

                    }
                }).change();
            }





        }

        function arrayAdder(userOnePoint, userTwoPoint, userThreePoint, userFourPoint) {
            console.log(userOnePoint + " + " + userTwoPoint + " + " + userThreePoint + " + " + userFourPoint);
        }
    </script>

</body>

</html>